<p>I have been recently learning about <a href="http://9front.org/">9front</a>, a modern distribution of plan9.</p>

<p>I installed it on my Thinkpad x220 laptop. Since my laptop uses a Realtek wifi card, I did not get wifi, so I had to do some weird ethernet connection things with my desktop. Needless to say, I got it working by adding Ethernet out of my desktop with NetworkManager on Linux.</p>

<p><code class="language-plaintext highlighter-rouge">Amavect</code> on irc <strong><em>very</em></strong> kindly walked me through the process, so I want to have it here for my future self as well as anyone why wanders by with the same question.</p>

<p>To start we need to specify ourselves as the auth server.
This is done by editing /lib/ndb/local database.
Here is mine:</p>
<pre><code class="language-ndb">#
#  files comprising the database, use as many as you like, see ndb(6)
#
database=
	file=/net/ndb
	file=/lib/ndb/local
	file=/lib/ndb/common

#
#  entries defining the dns root.  these will be overridden by any
#  authentic info obtained from the root.
#
dom=
	ns=A.ROOT-SERVERS.NET
	ns=B.ROOT-SERVERS.NET
	ns=C.ROOT-SERVERS.NET
	ns=D.ROOT-SERVERS.NET
	ns=E.ROOT-SERVERS.NET
	ns=F.ROOT-SERVERS.NET
	ns=G.ROOT-SERVERS.NET
	ns=H.ROOT-SERVERS.NET
	ns=I.ROOT-SERVERS.NET
	ns=J.ROOT-SERVERS.NET
	ns=K.ROOT-SERVERS.NET
	ns=L.ROOT-SERVERS.NET
	ns=M.ROOT-SERVERS.NET

#
#  because the public demands the name localsource
#
ip=127.0.0.1 sys=localhost dom=localhost

sys=cirno ether=f0def16da6f3
ipnet=dojo ip=10.42.0.0 ipmask=255.255.255.0
	ipgw=10.42.0.1
	authdom=dojo
	auth=cirno
	cpu=cirno
	fs=cirno
</code></pre>
<p>My “hostname” is <code class="language-plaintext highlighter-rouge">cirno</code>, my network name is called <code class="language-plaintext highlighter-rouge">dojo</code> and <code class="language-plaintext highlighter-rouge">10.42.0.1</code> is my NetworkManager dhcp server thing. My ip on my Thinkpad is <code class="language-plaintext highlighter-rouge">10.42.0.61</code>.
I had to get this file right and check it with <code class="language-plaintext highlighter-rouge">netaudit</code> to make sure everything worked. Then I needed to change <code class="language-plaintext highlighter-rouge">service=cpu</code> in <code class="language-plaintext highlighter-rouge">/n/9fat/plan9.ini</code> in order to get <code class="language-plaintext highlighter-rouge">auth/keyfs</code> running by default and listening on port <code class="language-plaintext highlighter-rouge">567</code> for the cpu server.</p>

<p>Then I needed to be still in the <code class="language-plaintext highlighter-rouge">auth/keyfs</code> daemon namespace and make a password in <code class="language-plaintext highlighter-rouge">secstore</code> with <code class="language-plaintext highlighter-rouge">auth/changeuser</code>.</p>

<p>If the user was not default, I needed to install the user to the fileserver.</p>

<p>Then reboot!</p>

<p>In the boot menu here is what I put in:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>authid: glenda
authdom: dojo
secstore key: &lt;password for glenda&gt;
password: &lt;password for glenda&gt;
</code></pre></div></div>
<p>Then we have a shell.</p>

<p>I needed to run <code class="language-plaintext highlighter-rouge">ip/ipconfig</code> to make the network work in the shell (i think!).</p>

<p>Then I could use</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drawterm -h 10.42.0.61 -u glenda
</code></pre></div></div>
<p>on my linux machine with <code class="language-plaintext highlighter-rouge">auth[10.42.0.61]</code> left blank and the glenda password as the password.
Then run <code class="language-plaintext highlighter-rouge">rio</code> and I am in!!!</p>

<p>Hooray!</p>

<p>Hopefully my future self thanks me for this, and I owe a huge thanks to Amavect for helping me with this. The next steps is to figure out how to run rio on start (like <code class="language-plaintext highlighter-rouge">service=terminal</code>) even when <code class="language-plaintext highlighter-rouge">service=cpu</code>. <code class="language-plaintext highlighter-rouge">Amavect</code> said this was doable, and had something to with “services”.</p>

<p>For completeness, here is my <code class="language-plaintext highlighter-rouge">/n/9fat/plan9.ini</code> file:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bootfile=9pc64
bootargs=local!/dev/sdE0/fscache
mouseport=ps2
monitor=vesa
vgasize=1366x768x32
service=cpu
</code></pre></div></div>

<p>Also, these fqa links deal with the same things that I talked about in this post. (I wanted to put everything in one place)</p>

<p>http://fqa.9front.org/fqa7.html#7.5.1
http://fqa.9front.org/fqa7.html#7.4</p>
